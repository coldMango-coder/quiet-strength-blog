{
  "version": 2,
  "cleanUrls": false,
  "trailingSlash": false,
  "build": {
    "env": {
      "REACT_APP_COMMIT_SHA": "${VERCEL_GIT_COMMIT_SHA}",
      "REACT_APP_BUILD_TIME": "${VERCEL_GIT_COMMIT_TIMESTAMP}"
    }
  },
  
  "rewrites": [
    {
      "source": "/robots.txt",
      "destination": "/robots.txt"
    },
    {
      "source": "/sitemap.xml",
      "destination": "/sitemap.xml"
    },
    {
      "source": "/((?!static/|assets/|images/|robots.txt|sitemap.xml|hotfix.css|refresh.html).*)",
      "destination": "/index.html"
    }
  ],
  "redirects": [
    {
      "source": "/:path*",
      "has": [
        { "type": "host", "value": "www.trueallyguide.com" }
      ],
      "destination": "https://trueallyguide.com/:path*",
      "permanent": true
    },
    {
      // Enforce HTTPS on apex domain without causing redirect loops
      "source": "/:path*",
      "has": [
        { "type": "host", "value": "trueallyguide.com" },
        { "type": "header", "key": "x-forwarded-proto", "value": "http" }
      ],
      "destination": "https://trueallyguide.com/:path*",
      "permanent": true
    },
    {
      "source": "/category/Introversion%20%26%20Personality",
      "destination": "https://trueallyguide.com/category/introversion-and-personality",
      "permanent": true
    },
    {
      "source": "/category/Relationships%20%26%20Dating",
      "destination": "https://trueallyguide.com/category/relationships-and-dating",
      "permanent": true
    },
    {
      "source": "/category/Career%20%26%20Workplace",
      "destination": "https://trueallyguide.com/category/career-and-workplace",
      "permanent": true
    },
    {
      "source": "/static/js/main.d4704f7c.js",
      "destination": "/static/js/main.4ddb9a20.js",
      "permanent": true
    },
    {
      "source": "/static/js/872.656d3240.chunk.js",
      "destination": "/static/js/872.4eb48aed.chunk.js",
      "permanent": true
    }
  ],
  "headers": [
    {
      "source": "/fonts/fonts.css",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "no-store"
        }
      ]
    },
    {
      "source": "/hotfix.css",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "no-store"
        }
      ]
    },
    {
      "source": "/(.*)\\.(css|js|mjs|woff2|png|jpg|jpeg|svg|webp|avif)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    },
    {
      "source": "/static/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    },
    {
      "source": "/assets/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    },
    {
      "source": "/images/(.*)",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=31536000, immutable"
        }
      ]
    },
    {
      "source": "/(index.html|)$",
      "headers": [
        {
          "key": "Cache-Control",
          "value": "public, max-age=0, must-revalidate"
        }
      ]
    }
  ]
}
