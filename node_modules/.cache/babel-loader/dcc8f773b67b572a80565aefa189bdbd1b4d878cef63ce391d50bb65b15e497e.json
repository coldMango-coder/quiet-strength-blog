{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jurek2\\\\Downloads\\\\Project_WEB_01\\\\src\\\\components\\\\OptimizedImage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OptimizedImage = ({\n  src,\n  alt,\n  className = '',\n  width,\n  height,\n  loading = 'lazy',\n  sizes = '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',\n  priority = false,\n  ...props\n}) => {\n  _s();\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false); // Never show immediately for performance\n  const [hasError, setHasError] = useState(false);\n  const [showRealImage, setShowRealImage] = useState(false);\n  const imgRef = useRef();\n\n  // Ultra-deferred loading for maximum performance\n  useEffect(() => {\n    // Always start with placeholder, defer real image loading\n    const loadRealImage = () => {\n      setTimeout(() => {\n        setShowRealImage(true);\n        const observer = new IntersectionObserver(([entry]) => {\n          if (entry.isIntersecting) {\n            setIsInView(true);\n            observer.disconnect();\n          }\n        }, {\n          rootMargin: '200px 0px',\n          // Load images well before they come into view\n          threshold: 0.01\n        });\n        if (imgRef.current) {\n          observer.observe(imgRef.current);\n        }\n        return () => observer.disconnect();\n      }, priority ? 2000 : 5000); // Wait 2-5 seconds before even attempting to load\n    };\n\n    // Only load images after page is fully loaded and user has interacted\n    if (document.readyState === 'complete') {\n      loadRealImage();\n    } else {\n      window.addEventListener('load', loadRealImage);\n      return () => window.removeEventListener('load', loadRealImage);\n    }\n  }, [priority]);\n\n  // Use original source only to avoid loading non-existent WebP/AVIF files\n  const sources = {\n    original: src\n  };\n\n  // Generate srcset for responsive images\n  const generateSrcSet = baseSrc => {\n    if (!baseSrc) return '';\n\n    // For now, just return the original image without responsive variants\n    return baseSrc;\n  };\n  const handleLoad = () => {\n    setIsLoaded(true);\n  };\n  const handleError = e => {\n    // Show placeholder if image fails to load\n    setHasError(true);\n    setIsLoaded(true);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: imgRef,\n    className: `relative overflow-hidden ${className}`,\n    style: {\n      aspectRatio: width && height ? `${width}/${height}` : undefined,\n      backgroundColor: '#f3f4f6' // placeholder background\n    },\n    children: [(!isLoaded || hasError) && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"w-8 h-8 text-gray-400\",\n        fill: \"currentColor\",\n        viewBox: \"0 0 20 20\",\n        \"aria-hidden\": \"true\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          d: \"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\",\n          clipRule: \"evenodd\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 98,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 91,\n      columnNumber: 9\n    }, this), isInView && /*#__PURE__*/_jsxDEV(\"img\", {\n      src: sources.original,\n      srcSet: generateSrcSet(sources.original),\n      sizes: sizes,\n      alt: alt,\n      width: width,\n      height: height,\n      loading: priority ? 'eager' : 'lazy',\n      decoding: \"async\",\n      onLoad: handleLoad,\n      onError: handleError,\n      className: `transition-opacity duration-300 ${isLoaded ? 'opacity-100' : 'opacity-0'} w-full h-full object-cover`,\n      ...props\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 81,\n    columnNumber: 5\n  }, this);\n};\n_s(OptimizedImage, \"Y+DWhsU0SYcgVewzx4MLfPd3fP0=\");\n_c = OptimizedImage;\nexport default OptimizedImage;\nvar _c;\n$RefreshReg$(_c, \"OptimizedImage\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","OptimizedImage","src","alt","className","width","height","loading","sizes","priority","props","_s","isLoaded","setIsLoaded","isInView","setIsInView","hasError","setHasError","showRealImage","setShowRealImage","imgRef","loadRealImage","setTimeout","observer","IntersectionObserver","entry","isIntersecting","disconnect","rootMargin","threshold","current","observe","document","readyState","window","addEventListener","removeEventListener","sources","original","generateSrcSet","baseSrc","handleLoad","handleError","e","ref","style","aspectRatio","undefined","backgroundColor","children","fill","viewBox","fillRule","d","clipRule","fileName","_jsxFileName","lineNumber","columnNumber","srcSet","decoding","onLoad","onError","_c","$RefreshReg$"],"sources":["C:/Users/Jurek2/Downloads/Project_WEB_01/src/components/OptimizedImage.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n\nconst OptimizedImage = ({ \n  src, \n  alt, \n  className = '', \n  width, \n  height, \n  loading = 'lazy',\n  sizes = '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',\n  priority = false,\n  ...props \n}) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false); // Never show immediately for performance\n  const [hasError, setHasError] = useState(false);\n  const [showRealImage, setShowRealImage] = useState(false);\n  const imgRef = useRef();\n\n  // Ultra-deferred loading for maximum performance\n  useEffect(() => {\n    // Always start with placeholder, defer real image loading\n    const loadRealImage = () => {\n      setTimeout(() => {\n        setShowRealImage(true);\n        \n        const observer = new IntersectionObserver(\n          ([entry]) => {\n            if (entry.isIntersecting) {\n              setIsInView(true);\n              observer.disconnect();\n            }\n          },\n          {\n            rootMargin: '200px 0px', // Load images well before they come into view\n            threshold: 0.01\n          }\n        );\n\n        if (imgRef.current) {\n          observer.observe(imgRef.current);\n        }\n\n        return () => observer.disconnect();\n      }, priority ? 2000 : 5000); // Wait 2-5 seconds before even attempting to load\n    };\n\n    // Only load images after page is fully loaded and user has interacted\n    if (document.readyState === 'complete') {\n      loadRealImage();\n    } else {\n      window.addEventListener('load', loadRealImage);\n      return () => window.removeEventListener('load', loadRealImage);\n    }\n  }, [priority]);\n\n  // Use original source only to avoid loading non-existent WebP/AVIF files\n  const sources = {\n    original: src\n  };\n  \n  // Generate srcset for responsive images\n  const generateSrcSet = (baseSrc) => {\n    if (!baseSrc) return '';\n    \n    // For now, just return the original image without responsive variants\n    return baseSrc;\n  };\n\n  const handleLoad = () => {\n    setIsLoaded(true);\n  };\n\n  const handleError = (e) => {\n    // Show placeholder if image fails to load\n    setHasError(true);\n    setIsLoaded(true);\n  };\n\n  return (\n    <div \n      ref={imgRef}\n      className={`relative overflow-hidden ${className}`}\n      style={{ \n        aspectRatio: width && height ? `${width}/${height}` : undefined,\n        backgroundColor: '#f3f4f6' // placeholder background\n      }}\n    >\n      {/* Placeholder while loading or error state */}\n      {(!isLoaded || hasError) && (\n        <div className=\"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center\">\n          <svg \n            className=\"w-8 h-8 text-gray-400\" \n            fill=\"currentColor\" \n            viewBox=\"0 0 20 20\"\n            aria-hidden=\"true\"\n          >\n            <path \n              fillRule=\"evenodd\" \n              d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" \n              clipRule=\"evenodd\" \n            />\n          </svg>\n        </div>\n      )}\n      \n      {/* Load original image only */}\n      {isInView && (\n        <img\n          src={sources.original}\n          srcSet={generateSrcSet(sources.original)}\n          sizes={sizes}\n          alt={alt}\n          width={width}\n          height={height}\n          loading={priority ? 'eager' : 'lazy'}\n          decoding=\"async\"\n          onLoad={handleLoad}\n          onError={handleError}\n          className={`transition-opacity duration-300 ${isLoaded ? 'opacity-100' : 'opacity-0'} w-full h-full object-cover`}\n          {...props}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default OptimizedImage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}