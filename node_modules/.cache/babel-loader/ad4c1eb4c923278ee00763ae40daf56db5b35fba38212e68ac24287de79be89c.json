{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Jurek2\\\\Downloads\\\\Project_WEB_01\\\\src\\\\components\\\\OptimizedImage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from 'react';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst OptimizedImage = ({\n  src,\n  alt,\n  className = '',\n  width,\n  height,\n  loading = 'lazy',\n  sizes = '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',\n  priority = false,\n  ...props\n}) => {\n  _s();\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false);\n  const imgRef = useRef();\n\n  // Intersection Observer for lazy loading\n  useEffect(() => {\n    if (priority || loading === 'eager') {\n      setIsInView(true);\n      return;\n    }\n    const observer = new IntersectionObserver(([entry]) => {\n      if (entry.isIntersecting) {\n        setIsInView(true);\n        observer.disconnect();\n      }\n    }, {\n      rootMargin: '50px 0px',\n      // Load images 50px before they come into view\n      threshold: 0.1\n    });\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n    return () => observer.disconnect();\n  }, [priority, loading]);\n\n  // Generate WebP and fallback sources\n  const getOptimizedSrc = originalSrc => {\n    if (!originalSrc) return originalSrc;\n\n    // For production, you'd implement actual WebP conversion\n    // For now, we'll optimize the existing images\n    const webpSrc = originalSrc.replace(/\\.(jpg|jpeg|png)$/i, '.webp');\n    const avifSrc = originalSrc.replace(/\\.(jpg|jpeg|png)$/i, '.avif');\n    return {\n      avif: avifSrc,\n      webp: webpSrc,\n      original: originalSrc\n    };\n  };\n  const sources = getOptimizedSrc(src);\n\n  // Generate srcset for responsive images\n  const generateSrcSet = baseSrc => {\n    if (!baseSrc) return '';\n\n    // For actual implementation, you'd generate different sizes\n    const sizes = [640, 750, 828, 1080, 1200, 1920, 2048];\n    return sizes.map(size => `${baseSrc}?w=${size} ${size}w`).join(', ');\n  };\n  const handleLoad = () => {\n    setIsLoaded(true);\n  };\n  const handleError = e => {\n    // Fallback to original if WebP/AVIF fails\n    if (e.target.src !== sources.original) {\n      e.target.src = sources.original;\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: imgRef,\n    className: `relative overflow-hidden ${className}`,\n    style: {\n      aspectRatio: width && height ? `${width}/${height}` : undefined,\n      backgroundColor: '#f3f4f6' // placeholder background\n    },\n    children: [!isLoaded && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center\",\n      children: /*#__PURE__*/_jsxDEV(\"svg\", {\n        className: \"w-8 h-8 text-gray-400\",\n        fill: \"currentColor\",\n        viewBox: \"0 0 20 20\",\n        \"aria-hidden\": \"true\",\n        children: /*#__PURE__*/_jsxDEV(\"path\", {\n          fillRule: \"evenodd\",\n          d: \"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\",\n          clipRule: \"evenodd\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 94,\n      columnNumber: 9\n    }, this), isInView && /*#__PURE__*/_jsxDEV(\"picture\", {\n      children: [/*#__PURE__*/_jsxDEV(\"source\", {\n        srcSet: generateSrcSet(sources.avif),\n        sizes: sizes,\n        type: \"image/avif\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 114,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"source\", {\n        srcSet: generateSrcSet(sources.webp),\n        sizes: sizes,\n        type: \"image/webp\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"img\", {\n        src: sources.original,\n        srcSet: generateSrcSet(sources.original),\n        sizes: sizes,\n        alt: alt,\n        width: width,\n        height: height,\n        loading: priority ? 'eager' : 'lazy',\n        decoding: \"async\",\n        onLoad: handleLoad,\n        onError: handleError,\n        className: `transition-opacity duration-300 ${isLoaded ? 'opacity-100' : 'opacity-0'} w-full h-full object-cover`,\n        ...props\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 112,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n_s(OptimizedImage, \"7STQihRwUCq0eGnHwGKAY7M3ZyM=\");\n_c = OptimizedImage;\nexport default OptimizedImage;\nvar _c;\n$RefreshReg$(_c, \"OptimizedImage\");","map":{"version":3,"names":["React","useState","useRef","useEffect","jsxDEV","_jsxDEV","OptimizedImage","src","alt","className","width","height","loading","sizes","priority","props","_s","isLoaded","setIsLoaded","isInView","setIsInView","imgRef","observer","IntersectionObserver","entry","isIntersecting","disconnect","rootMargin","threshold","current","observe","getOptimizedSrc","originalSrc","webpSrc","replace","avifSrc","avif","webp","original","sources","generateSrcSet","baseSrc","map","size","join","handleLoad","handleError","e","target","ref","style","aspectRatio","undefined","backgroundColor","children","fill","viewBox","fillRule","d","clipRule","fileName","_jsxFileName","lineNumber","columnNumber","srcSet","type","decoding","onLoad","onError","_c","$RefreshReg$"],"sources":["C:/Users/Jurek2/Downloads/Project_WEB_01/src/components/OptimizedImage.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from 'react';\n\nconst OptimizedImage = ({ \n  src, \n  alt, \n  className = '', \n  width, \n  height, \n  loading = 'lazy',\n  sizes = '(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw',\n  priority = false,\n  ...props \n}) => {\n  const [isLoaded, setIsLoaded] = useState(false);\n  const [isInView, setIsInView] = useState(false);\n  const imgRef = useRef();\n\n  // Intersection Observer for lazy loading\n  useEffect(() => {\n    if (priority || loading === 'eager') {\n      setIsInView(true);\n      return;\n    }\n\n    const observer = new IntersectionObserver(\n      ([entry]) => {\n        if (entry.isIntersecting) {\n          setIsInView(true);\n          observer.disconnect();\n        }\n      },\n      {\n        rootMargin: '50px 0px', // Load images 50px before they come into view\n        threshold: 0.1\n      }\n    );\n\n    if (imgRef.current) {\n      observer.observe(imgRef.current);\n    }\n\n    return () => observer.disconnect();\n  }, [priority, loading]);\n\n  // Generate WebP and fallback sources\n  const getOptimizedSrc = (originalSrc) => {\n    if (!originalSrc) return originalSrc;\n    \n    // For production, you'd implement actual WebP conversion\n    // For now, we'll optimize the existing images\n    const webpSrc = originalSrc.replace(/\\.(jpg|jpeg|png)$/i, '.webp');\n    const avifSrc = originalSrc.replace(/\\.(jpg|jpeg|png)$/i, '.avif');\n    \n    return {\n      avif: avifSrc,\n      webp: webpSrc,\n      original: originalSrc\n    };\n  };\n\n  const sources = getOptimizedSrc(src);\n  \n  // Generate srcset for responsive images\n  const generateSrcSet = (baseSrc) => {\n    if (!baseSrc) return '';\n    \n    // For actual implementation, you'd generate different sizes\n    const sizes = [640, 750, 828, 1080, 1200, 1920, 2048];\n    return sizes.map(size => `${baseSrc}?w=${size} ${size}w`).join(', ');\n  };\n\n  const handleLoad = () => {\n    setIsLoaded(true);\n  };\n\n  const handleError = (e) => {\n    // Fallback to original if WebP/AVIF fails\n    if (e.target.src !== sources.original) {\n      e.target.src = sources.original;\n    }\n  };\n\n  return (\n    <div \n      ref={imgRef}\n      className={`relative overflow-hidden ${className}`}\n      style={{ \n        aspectRatio: width && height ? `${width}/${height}` : undefined,\n        backgroundColor: '#f3f4f6' // placeholder background\n      }}\n    >\n      {/* Placeholder while loading */}\n      {!isLoaded && (\n        <div className=\"absolute inset-0 bg-gray-200 animate-pulse flex items-center justify-center\">\n          <svg \n            className=\"w-8 h-8 text-gray-400\" \n            fill=\"currentColor\" \n            viewBox=\"0 0 20 20\"\n            aria-hidden=\"true\"\n          >\n            <path \n              fillRule=\"evenodd\" \n              d=\"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z\" \n              clipRule=\"evenodd\" \n            />\n          </svg>\n        </div>\n      )}\n      \n      {/* Optimized picture element with multiple formats */}\n      {isInView && (\n        <picture>\n          {/* AVIF format for maximum compression */}\n          <source \n            srcSet={generateSrcSet(sources.avif)} \n            sizes={sizes}\n            type=\"image/avif\" \n          />\n          \n          {/* WebP format for better compression */}\n          <source \n            srcSet={generateSrcSet(sources.webp)} \n            sizes={sizes}\n            type=\"image/webp\" \n          />\n          \n          {/* Fallback to original format */}\n          <img\n            src={sources.original}\n            srcSet={generateSrcSet(sources.original)}\n            sizes={sizes}\n            alt={alt}\n            width={width}\n            height={height}\n            loading={priority ? 'eager' : 'lazy'}\n            decoding=\"async\"\n            onLoad={handleLoad}\n            onError={handleError}\n            className={`transition-opacity duration-300 ${isLoaded ? 'opacity-100' : 'opacity-0'} w-full h-full object-cover`}\n            {...props}\n          />\n        </picture>\n      )}\n    </div>\n  );\n};\n\nexport default OptimizedImage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}